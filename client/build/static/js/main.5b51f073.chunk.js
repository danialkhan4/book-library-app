(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{155:function(e,t,a){e.exports=a(262)},181:function(e,t,a){},236:function(e,t,a){},251:function(e,t,a){},256:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=a(46),i=a(50),u=a(82),s=a.n(u);a(160),a(163);s.a.initializeApp({apiKey:"AIzaSyCbb11Pr-rx9Sk6oFW95_eP8LmZpxEdJEM",authDomain:"book-library-app-8eb19.firebaseapp.com",databaseURL:"https://book-library-app-8eb19.firebaseio.com",projectId:"book-library-app-8eb19",storageBucket:"book-library-app-8eb19.appspot.com",messagingSenderId:"553206836295",appId:"1:553206836295:web:ca4ff0892ff6fd281b1562",measurementId:"G-KFFN83VGEQ"});var m=s.a.auth(),b=(s.a.firestore(),s.a),p=r.a.createContext();function h(){return Object(n.useContext)(p)}function f(e){var t=e.children,a=Object(n.useState)(null),l=Object(i.a)(a,2),o=l[0],c=l[1],u=Object(n.useState)(!0),s=Object(i.a)(u,2),h=s[0],f=s[1];Object(n.useEffect)((function(){return m.onAuthStateChanged((function(e){c(e),f(!1)}))}),[]);var d={user:o,login:function(){var e=new b.auth.GoogleAuthProvider;return m.signInWithPopup(e)},logout:function(){return m.signOut()}};return r.a.createElement(p.Provider,{value:d},!h&&t)}var d=a(30),E=a(65),v=a(272),g=a(273),y=a(47),k=a.n(y),O=a(56),j=a(61),I=a.n(j),w=a(266),x=a(153),N=a(263),S=a(264),C=a(265),L=a(267),A=(a(181),a(268)),B=a(269),R=a(270),z=S.a.Text,P=r.a.createElement(C.a,{onClick:console.log("click")},r.a.createElement(C.a.Item,{key:"1"},"Read"),r.a.createElement(C.a.Item,{key:"2"},"Currently reading"),r.a.createElement(C.a.Item,{key:"3"},"Want to read"));var T=function(e){for(var t,a=[],n=[],l=h().user,o=e.authors.length-1,c=0;c<e.authors.length;c++)1===e.authors.length?a.push(r.a.createElement(z,{key:c},e.authors[c])):c!==o?a.push(r.a.createElement(z,{key:c},e.authors[c],", ")):a.push(r.a.createElement(z,{key:c},e.authors[c]));return e.subtitle?n.push(r.a.createElement(z,{key:e.name,strong:!0},e.name,": ",e.subtitle,r.a.createElement("br",null))):n.push(r.a.createElement(z,{key:e.name,strong:!0},e.name,r.a.createElement("br",null))),t=e.isLibraryRender?r.a.createElement(E.a,{onClick:function(){var t={title:e.name,authors:e.authors,subtitle:e.subtitle,thumbnail:e.thumbnail};I.a.post("/api/user/remove",{bookData:t,uid:l.uid}).then((function(t){e.onChange()})).catch((function(e){x.b.error("(Error) book was not added")}))},style:{marginRight:5}},r.a.createElement(A.a,null)):r.a.createElement(E.a,{type:"primary",onClick:function(){if(l){var t={title:e.name,authors:e.authors,subtitle:e.subtitle,thumbnail:e.thumbnail};I.a.post("/api/user/add",{bookData:t,uid:l.uid}).then((function(e){switch(e.status){case 227:x.b.warning("This book is already in your library");break;default:x.b.success("Book added to your library")}})).catch((function(e){x.b.error("(Error) book was not added")}))}else x.b.error("You must be logged in to do that")},style:{marginRight:5}},r.a.createElement(B.a,null),"Add to shelf"),r.a.createElement("div",{className:"bookCard"},r.a.createElement("img",{className:"imageContainer",alt:n,src:e.thumbnail}),r.a.createElement("div",{className:"textContainer"},n,r.a.createElement("br",null),a),r.a.createElement("div",{className:"options"},t,e.isLibraryRender&&r.a.createElement(L.a,{overlay:P},r.a.createElement(E.a,{type:"dashed"},"Mark as ",r.a.createElement(R.a,null)))))},G=(a(236),w.a.Search);function _(e){return"undefined"===typeof e}var F=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(i.a)(o,2),u=c[0],s=c[1],m=Object(n.useState)(!1),b=Object(i.a)(m,2),p=b[0],h=b[1];function f(){return(f=Object(O.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),e.prev=1,0!==u.length&&u){e.next=6;break}return x.b.warning("Please enter something"),h(!1),e.abrupt("return");case 6:I.a.get("https://www.googleapis.com/books/v1/volumes?q="+u+"&key=AIzaSyC8h_mfSuQv6QnzAbucMydsQlFOVEvhU_o").then((function(e){l(e.data.items),h(!1)})).catch((function(e){x.b.error("Error occurred "),h(!1)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),x.b.error("Error occurred "),h(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"bookSearch"},r.a.createElement("div",{id:"numInput"},r.a.createElement(G,{onChange:function(e){s(e.target.value.trim())},placeholder:"Book Title",onSearch:function(){return f.apply(this,arguments)},enterButton:!0})),r.a.createElement("div",{id:"spinner"},p&&r.a.createElement(N.a,null)),r.a.createElement("div",{className:"listing"},a&&a.map((function(e,t){return function(e){_(e.volumeInfo.imageLinks)&&(e.volumeInfo.imageLinks={thumbnail:"default",smallThumbnail:"default"});_(e.volumeInfo.subtitle)&&(e.volumeInfo.subtitle=!1);_(e.volumeInfo.authors)&&(e.volumeInfo.authors=[" "]);_(e.volumeInfo.title)&&(e.volumeInfo.title=" ")}(e),r.a.createElement(T,{key:e.id,name:e.volumeInfo.title,thumbnail:e.volumeInfo.imageLinks.thumbnail,subtitle:e.volumeInfo.subtitle,authors:e.volumeInfo.authors,isLibraryRender:!1})}))))};a(251);var M=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),c=Object(i.a)(o,2),u=c[0],s=c[1],m=Object(n.useState)(!1),b=Object(i.a)(m,2),p=b[0],f=b[1],d=h().user;function E(){s(!u)}return Object(n.useEffect)((function(){function e(){return(e=Object(O.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d?I.a.get("/api/library",{params:{uid:d.uid}}).then((function(e){l(e.data),f(!1)})).catch((function(e){console.log(e),f(!1)})):(l([]),f(!1))}catch(t){console.log(t),f(!1)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f(!0),function(){e.apply(this,arguments)}()}),[d,u]),r.a.createElement("div",{className:"bookLibrary"},d?r.a.createElement("h3",{className:"library"},d&&d.displayName,"'s Books ",p&&r.a.createElement(N.a,null)):r.a.createElement("h1",{className:"library"},"Login to see your library"),r.a.createElement("div",{className:"listing"},a&&a.map((function(e,t){return r.a.createElement(T,{key:e.title+e.authors,name:e.title,onChange:E,thumbnail:e.thumbnail,subtitle:e.subtitle,authors:e.authors,isLibraryRender:!0})}))))},Q=a(149),W=a.n(Q);a(256);var D=function(){var e=h().login,t=(S.a.Text,S.a.Title),a=Object(d.g)();function n(){return(n=Object(O.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:a.push("/library"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),x.b.error("Error occurred");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"login-card"},r.a.createElement(t,{level:5},"\u2500\u2500 Login \u2500\u2500"),r.a.createElement(W.a,{id:"google-login",onClick:function(){return n.apply(this,arguments)},type:"dark"}))},J=a(271);var V=function(){var e=h().logout,t=Object(d.g)();function a(){return(a=Object(O.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e();case 3:t.push("/"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),x.b.error("Logout failed");case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}return r.a.createElement(E.a,{onClick:function(){return a.apply(this,arguments)},size:"medium"},r.a.createElement(J.a,null),"Logout")},K=a(154);var U=function(e){var t=e.component,a=Object(K.a)(e,["component"]),n=h().user;return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/login"})}}))};a(258);var q=function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("h3",null,"Welcome"))};a(259),a(260),a(261);var Y=function(){var e=h().user;return r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"leftInfo"},r.a.createElement("div",{className:"title"},r.a.createElement(c.b,{id:"title",to:"/"},"Books Library")),r.a.createElement("div",{className:"buttons"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/library"},"My Library")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/search"},"Search")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/settings"},"Settings"))))),r.a.createElement("div",{className:"rightInfo"},r.a.createElement("div",{className:"links"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(E.a,{href:"https://github.com/danialkhan4/book-library-web-app",target:"_blank",type:"link",block:!0},r.a.createElement(v.a,null),"View Github")),r.a.createElement("li",null,r.a.createElement(E.a,{href:"https://developers.google.com/books",target:"_blank",type:"link",block:!0},r.a.createElement(g.a,null),"Google Books")))),r.a.createElement("div",{className:"login"},r.a.createElement("ul",null,r.a.createElement("li",null,e?r.a.createElement(V,null):r.a.createElement(c.b,{to:"/login"},r.a.createElement(E.a,{type:"primary",size:"large"},"Login")))))))),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/search",component:F}),r.a.createElement(U,{exact:!0,path:"/library",component:M}),r.a.createElement(d.b,{exact:!0,path:"/login",component:D}),r.a.createElement(d.b,{exact:!0,path:"/",component:q})))};o.a.render(r.a.createElement(c.a,null,r.a.createElement(f,null,r.a.createElement(Y,null))),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.5b51f073.chunk.js.map