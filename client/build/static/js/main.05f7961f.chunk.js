(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{155:function(e,t,a){e.exports=a(261)},181:function(e,t,a){},236:function(e,t,a){},251:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=a(52),i=a(30),u=a(49),s=a(82),m=a.n(s);a(160),a(163);m.a.initializeApp({apiKey:"AIzaSyCbb11Pr-rx9Sk6oFW95_eP8LmZpxEdJEM",authDomain:"book-library-app-8eb19.firebaseapp.com",databaseURL:"https://book-library-app-8eb19.firebaseio.com",projectId:"book-library-app-8eb19",storageBucket:"book-library-app-8eb19.appspot.com",messagingSenderId:"553206836295",appId:"1:553206836295:web:ca4ff0892ff6fd281b1562",measurementId:"G-KFFN83VGEQ"});var b=m.a.auth(),p=(m.a.firestore(),m.a),h=r.a.createContext();function f(){return Object(n.useContext)(h)}function d(e){var t=e.children,a=Object(n.useState)(null),l=Object(u.a)(a,2),o=l[0],c=l[1],i=Object(n.useState)(!0),s=Object(u.a)(i,2),m=s[0],f=s[1];Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){c(e),f(!1)}))}),[]);var d={user:o,login:function(){var e=new p.auth.GoogleAuthProvider;return b.signInWithPopup(e)},logout:function(){return b.signOut()}};return r.a.createElement(h.Provider,{value:d},!m&&t)}var E=a(65),v=a(271),g=a(272),y=a(46),k=a.n(y),O=a(56),j=a(61),I=a.n(j),w=a(265),x=a(153),N=a(262),S=a(263),C=a(264),L=a(266),R=(a(181),a(267)),A=a(268),B=a(269),z=S.a.Text,P=r.a.createElement(C.a,{onClick:console.log("click")},r.a.createElement(C.a.Item,{key:"1"},"Read"),r.a.createElement(C.a.Item,{key:"2"},"Currently reading"),r.a.createElement(C.a.Item,{key:"3"},"Want to read"));var G=function(e){for(var t,a=[],n=[],l=f().user,o=e.authors.length-1,c=0;c<e.authors.length;c++)1===e.authors.length?a.push(r.a.createElement(z,{key:c},e.authors[c])):c!==o?a.push(r.a.createElement(z,{key:c},e.authors[c],", ")):a.push(r.a.createElement(z,{key:c},e.authors[c]));return e.subtitle?n.push(r.a.createElement(z,{key:e.name,strong:!0},e.name,": ",e.subtitle,r.a.createElement("br",null))):n.push(r.a.createElement(z,{key:e.name,strong:!0},e.name,r.a.createElement("br",null))),console.log(e.isLibraryRender),t=e.isLibraryRender?r.a.createElement(E.a,{onClick:function(){console.log("removing");var t={title:e.name,authors:e.authors,subtitle:e.subtitle,thumbnail:e.thumbnail};I.a.post("/api/user/remove",{bookData:t,uid:l.uid}).then((function(t){e.onChange()})).catch((function(e){x.b.error("(Error) book was not added")}))},style:{marginRight:5}},r.a.createElement(R.a,null)):r.a.createElement(E.a,{type:"primary",onClick:function(){var t={title:e.name,authors:e.authors,subtitle:e.subtitle,thumbnail:e.thumbnail};I.a.post("/api/user/add",{bookData:t,uid:l.uid}).then((function(e){switch(e.status){case 227:x.b.warning("This book is already in your library");break;default:x.b.success("Book added to your library")}})).catch((function(e){x.b.error("(Error) book was not added")}))},style:{marginRight:5}},r.a.createElement(A.a,null),"Add to shelf"),r.a.createElement("div",{className:"bookCard"},r.a.createElement("img",{className:"imageContainer",alt:n,src:e.thumbnail}),r.a.createElement("div",{className:"textContainer"},n,r.a.createElement("br",null),a),r.a.createElement("div",{className:"options"},t,e.isLibraryRender&&r.a.createElement(L.a,{overlay:P},r.a.createElement(E.a,{type:"dashed"},"Mark as ",r.a.createElement(B.a,null)))))},_=(a(236),w.a.Search);function F(e){return"undefined"===typeof e}var M=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(u.a)(o,2),i=c[0],s=c[1],m=Object(n.useState)(!1),b=Object(u.a)(m,2),p=b[0],h=b[1];function f(){return(f=Object(O.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),e.prev=1,0!==i.length&&i){e.next=6;break}return x.b.warning("Please enter something"),h(!1),e.abrupt("return");case 6:I.a.get("https://www.googleapis.com/books/v1/volumes?q="+i+"&key=AIzaSyC8h_mfSuQv6QnzAbucMydsQlFOVEvhU_o").then((function(e){l(e.data.items),h(!1)})).catch((function(e){x.b.error("Error occurred "),h(!1)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),x.b.error("Error occurred "),h(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"bookSearch"},r.a.createElement("div",{id:"numInput"},r.a.createElement(_,{onChange:function(e){s(e.target.value.trim())},placeholder:"Book Title",onSearch:function(){return f.apply(this,arguments)},enterButton:!0})),r.a.createElement("div",{id:"spinner"},p&&r.a.createElement(N.a,null)),r.a.createElement("div",{className:"listing"},a&&a.map((function(e,t){return function(e){F(e.volumeInfo.imageLinks)&&(e.volumeInfo.imageLinks={thumbnail:"default",smallThumbnail:"default"});F(e.volumeInfo.subtitle)&&(e.volumeInfo.subtitle=!1);F(e.volumeInfo.authors)&&(e.volumeInfo.authors=[" "]);F(e.volumeInfo.title)&&(e.volumeInfo.title=" ")}(e),r.a.createElement(G,{key:e.id,name:e.volumeInfo.title,thumbnail:e.volumeInfo.imageLinks.thumbnail,subtitle:e.volumeInfo.subtitle,authors:e.volumeInfo.authors,isLibraryRender:!1})}))))};a(251);var Q=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),c=Object(u.a)(o,2),i=c[0],s=c[1],m=Object(n.useState)(!1),b=Object(u.a)(m,2),p=b[0],h=b[1],d=f().user;function E(){s(!i)}return Object(n.useEffect)((function(){function e(){return(e=Object(O.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d?I.a.get("/api/library",{params:{uid:d.uid}}).then((function(e){l(e.data),h(!1)})).catch((function(e){console.log(e),h(!1)})):(l([]),h(!1))}catch(t){console.log(t),h(!1)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h(!0),function(){e.apply(this,arguments)}()}),[d,i]),r.a.createElement("div",{className:"bookLibrary"},d?r.a.createElement("h3",{className:"library"},d&&d.displayName,"'s Books ",p&&r.a.createElement(N.a,null)):r.a.createElement("h1",{className:"library"},"Login to see your library"),r.a.createElement("div",{className:"listing"},a&&a.map((function(e,t){return r.a.createElement(G,{key:e.title+e.authors,name:e.title,onChange:E,thumbnail:e.thumbnail,subtitle:e.subtitle,authors:e.authors,isLibraryRender:!0})}))))},T=a(149),W=a.n(T);var D=function(){var e=f().login,t=Object(i.g)();function a(){return(a=Object(O.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e();case 3:t.push("/library"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),x.b.error("Error occurred");case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(W.a,{onClick:function(){return a.apply(this,arguments)},type:"dark"}))},J=a(270);var V=function(){var e=f().logout,t=Object(i.g)();function a(){return(a=Object(O.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e();case 3:t.push("/"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),x.b.error("Logout failed");case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}return r.a.createElement(E.a,{onClick:function(){return a.apply(this,arguments)},size:"medium"},r.a.createElement(J.a,null),"Logout")},K=a(154);var U=function(e){var t=e.component,a=Object(K.a)(e,["component"]),n=f().user;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))};a(257);var q=function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("h3",null,"Welcome"))};a(258),a(259),a(260);var Z=function(){var e=f().user;return r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"leftInfo"},r.a.createElement("div",{className:"title"},r.a.createElement(c.b,{id:"title",to:"/"},"Books Library")),r.a.createElement("div",{className:"buttons"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/library"},"My Library")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/search"},"Search")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/settings"},"Settings"))))),r.a.createElement("div",{className:"rightInfo"},r.a.createElement("div",{className:"links"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(E.a,{href:"https://github.com/danialkhan4/book-library-web-app",target:"_blank",type:"link",block:!0},r.a.createElement(v.a,null),"View Github")),r.a.createElement("li",null,r.a.createElement(E.a,{href:"https://developers.google.com/books",target:"_blank",type:"link",block:!0},r.a.createElement(g.a,null),"Google Books")))),r.a.createElement("div",{className:"login"},r.a.createElement("ul",null,r.a.createElement("li",null,e?r.a.createElement(V,null):r.a.createElement(c.b,{to:"/login"},r.a.createElement(E.a,{type:"primary",size:"large"},"Login")))))))),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/search",component:M}),r.a.createElement(U,{exact:!0,path:"/library",component:Q}),r.a.createElement(i.b,{exact:!0,path:"/login",component:D}),r.a.createElement(i.b,{exact:!0,path:"/",component:q})))};o.a.render(r.a.createElement(d,null,r.a.createElement(Z,null)),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.05f7961f.chunk.js.map